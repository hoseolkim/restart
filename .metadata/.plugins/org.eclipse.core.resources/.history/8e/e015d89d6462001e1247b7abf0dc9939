package kr.or.ddit.paging;

import kr.or.ddit.vo.PaginationInfo;

public class BootstrapPaginationRenderer implements PaginationRenderer {
	private final String LITAG_START_PATTERN = "<li class='page-item' class='%s'>";
	private final String LITAG_START_CURRENT_PATTERN = "<li class='page-item' aria-current='page' class='%s'>";
	private final String LiTAG_END = "</li>";
	private final String ATAG_PATTERN = "<a href='javascript:;' class='page-link' onclick='fn_paging(%d);'>%s</a>";
	@Override
	public String renderPagination(PaginationInfo<?> paging) {
		
		int startPage = paging.getStartPage();
		int endPage = paging.getEndPage();
		int totalPage = paging.getTotalPage();
		int currentPage = paging.getCurrentPage();
		StringBuffer html = new StringBuffer();
		
			html.append("<ul class='pagination'>");
		if(startPage == 1) {
			html.append(
					String.format(LITAG_START_PATTERN, "disabled")
			);
			
			html.append(String.format(ATAG_PATTERN, startPage-1 , "이전"));
			
			html.append(LiTAG_END);
		}else {
			
		}
		
		for(int page = startPage ; page <= endPage ; page++) {
			// 현재 페이지일 경우
			if(page == currentPage) {
				html.append(
						String.format(LITAG_START_CURRENT_PATTERN, "")
						);
				html.append(
						String.format(ATAG_PATTERN, page, page)
						);
				html.append(LiTAG_END);
			}else {
				// 아닐 경우
				html.append(
						String.format(LITAG_START_PATTERN, "")
						);
				html.append(
						String.format(ATAG_PATTERN, page, page)
						);
				html.append(LiTAG_END);
			}
		}
		
		
		
		if(endPage < totalPage) {
			html.append(
				String.format(ATAG_PATTERN, endPage + 1 , "다음")
			);
		}else {
			html.append(
					String.format(LITAG_START_PATTERN, "disabled")
			);
			html.append(
					String.format(ATAG_PATTERN, endPage + 1 , "다음")
					);
			html.append(LiTAG_END);
		}
		
		html.append("</ul>");
		
		return html.toString();
		
		
	}

}
